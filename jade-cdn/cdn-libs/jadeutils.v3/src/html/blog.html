<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Vim-Wiki中使用Unicode字符</title>

<script type="text/javascript"            src="../../3rd/jquery/3.5.1/jquery.min.js"></script>
<link   type="text/css" rel="stylesheet" href="../../3rd/datatable/1.10.21/jq-1.5/datatables.min.css"/>
<script type="text/javascript"            src="../../3rd/datatable/1.10.21/jq-1.5/datatables.min.js"></script>
<link   type="text/css" rel="stylesheet" href="../../3rd/bootstrap/3.4.1/css/bootstrap.min.css" />
<script type="text/javascript"            src="../../3rd/bootstrap/3.4.1/js/bootstrap.min.js" ></script>
<link   type="text/css" rel="stylesheet" href="../../3rd/SyntaxHighlighter/2.1.364/styles/shCore.css"/>
<script type="text/javascript"            src="../../3rd/SyntaxHighlighter/2.1.364/scripts/shCore.js"></script>
<script type="text/javascript"            src="../../3rd/SyntaxHighlighter/2.1.364/scripts/shAutoloader.js"></script>
<script type="text/javascript"            src="../../3rd/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config"> </script>
<link title="lo-fi"       type="text/css" rel="alternate stylesheet" href="../themes/lo-fi/styles/all.min.css" />
<link title="hobbit"      type="text/css" rel="stylesheet"           href="../themes/hobbit/styles/all.min.css" />
<link title="paper-print" type="text/css" rel="alternate stylesheet" href="../themes/paper-print/styles/all.min.css" />


</head>
<body>

<nav id="topnav" class="navbar navbar-inverse  navbar-fixed-top" role="navigation"> </nav>

<main role="main" class="container">
<div class="row">		
<div class="col-xs-12 col-sm-12 col-md-8 col-lg-9 ctx-main"> 

<!-- banner start -->
<div class="pattern"><span></span></div>
<div class="vestibule"><h1>Jade Dungeon</h1><p id="subTitle"></p></div>
<div class="pattern"><span></span></div>
<!-- banner end -->

<!-- contents start -->
<div id="articles" class="content">

<h1>  Vim-Wiki中使用Unicode字符</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">配套Javascript脚本</a>
<ul>
<li><a href="#toc_1.1">查找unicode的代码</a>
<li><a href="#toc_1.2">Unicode在HTML、CSS、Javascript中不同的显示</a>
</ul>
</ul>
</div>

<h1 id="toc_1">配套Javascript脚本</h1>


<p>
为了在VimWiki中使用Unicode字符，
我们在网页模板的JS中定义了一个自定义标签<code>esp-unicode</code>：
</p>

<pre class="brush:javascript">
jadeUtils.initCustomElements = function () {

	/** 创建自定义标签，*/
	class EscapeUnicode extends HTMLElement {
		constructor() {
			super();
			let oldHtml = this.innerHTML;
			this.innerHTML = oldHtml.replaceAll(
					/(&amp;amp;#x?[0-9a-fA-F]{1,6};)/m, 
					(str) =&gt; { return str.replace('&amp;amp;','&amp;'); });
		}
	}

	/** 创建自定义标签必须要有一个连字符*/
	customElements.define('esp-unicode', EscapeUnicode);

};
</pre>

<p>
这样在wiki文件中就可以用自定义标签显示字符了：
</p>

<pre class="brush:html">
&lt;esp-unicode&gt;&amp;#x26f5;&lt;/esp-unicode&gt;
</pre>

<p>
显示为：<esp-unicode>&amp;#9973;</esp-unicode>
</p>

<p>
显示为：<esp-unicode>&amp;#x26f5;</esp-unicode>
</p>




<h2 id="toc_1.1">查找unicode的代码</h2>

<ul>
<li>
如果要查找常用的Unicode字符可以在这里查找：<code>https://symbl.cc/cn/</code>

<li>
把上面查找到的字符复制到这个工具里可以看它的编码：<code>https://unicode.yunser.com/unicode</code>

</ul>

<h2 id="toc_1.2">Unicode在HTML、CSS、Javascript中不同的显示</h2>

<p>
Unicode的编码在HTML中以10进制表示或16进制表示都有，在Javascript与CSS中以16进制表示。
</p>

<ul>
<li>
Javascript语法：<code>\u</code> + 16进制编码，如：<code>\u5b89</code>

<li>
CSS语法：<code>\</code> + 16进制编码，如：<code>\5b89</code>

<li>
HTML语法有两种：

<ul>
<li>
<code>&amp;#</code> + 10进制编码 + <code>;</code>，如：<code>&amp;#9973</code>；

<li>
<code>&amp;#x</code> + 16进制编码 + <code>;</code>，如：<code>&amp;#x26f5</code>

</ul>
</ul>

<p>
JavaScript中，可以使用<code>charCodeAt()</code>或者<code>codePointAt()</code>方法来获取字符的
Unicode 码，结果用十进制表示：
</p>

<pre class="brush:javascript">
'安'.charCodeAt ();  // 23433
'安'.codePointAt();  // 23433
</pre>

<p>
由于获取到的是十进制数，所有如果想在 js 和 css 里面用的话，
就需要用<code>toString(16)</code>转 16 进制，然后再做进一步处理了：
</p>

<pre class="brush:javascript">
// 输出字符串："\u8317"
var unicode = '\\u' + '茗'.charCodeAt().toString(16);
// 输出汉字："茗"
JSON.parse('"' + unicode + '"');
// 或者使用eval解析也可以
eval('"' + unicode + '"');
</pre>

<p>
另一种方法，就将十进制Unicode码为36213的字符转换为字符串，然后将此字符串输出：
</p>

<pre class="brush:javascript">
String.fromCharCode(36213);
</pre>


<p>
在现在的wiki类<code>net.jadedungeon.wiki</code>里，
提供了两个按Unicode字符查找对应十进制与十六进制编码的工具：
</p>

<pre class="brush:javascript">
self.transUnicodeWikiInHex = function (c) {
	return "&lt;esp-unicode&gt;&amp;#x" 
		+ c.charCodeAt().toString(16) 
		+ ";&lt;/esp-unicode&gt;";
};

self.transUnicodeWikiInDec = function (c) {
	return "&lt;esp-unicode&gt;&amp;#"  
		+ c.charCodeAt()
		+ ";&lt;/esp-unicode&gt;";
};

</pre>

<p>
可以在控制台里直接调用：
</p>

<pre class="brush:javascript">

page.transUnicodeWikiInDec('⛵');
&gt; "&lt;esp-unicode&gt;&amp;#9973;&lt;/esp-unicode&gt;"

page.transUnicodeWikiInHex('⛵');
&gt; "&lt;esp-unicode&gt;&amp;#x26f5;&lt;/esp-unicode&gt;" 

</pre>

</div>
<!-- contents end -->

<!-- footer start -->
<div class="footer">
<div class="left">2025 <a href="index.html">jade-dungeon.cn</a>. Valid <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a>&amp;<a href="http://validator.w3.org/check?uri=referer">XHTML</a></div>
<div><a href="https://beian.miit.gov.cn">沪ICP备案2025113345号</a>.</div>
<div class="right"><a href="http://templates.arcsin.se/">Website template</a> by <a href="http://arcsin.se/">Arcsin</a></div>
<div class="clearer">&nbsp;</div>
</div>
<!-- footer end -->

				</div> <!-- ctx-main end -->

<!-- float toc index start -->
<div class="tocWrap hidden-md hidden-lg">
<div class="toggler"><em id="tocBoxBtn" class="toggleTocPanClose">INDEX</em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em id="tocLevBtn" class="toggleTocTreeClose">FOLD</em></div>
<div class="widget-content sideToc">
<div id="floatTocIdxTree" class="sideTocIdx"></div>
</div>
</div>
<!-- float toc index end -->

<!-- /.blog-sidebar start-->
<aside class="hidden-xs hidden-sm col-md-4 col-lg-3 blog-sidebar container">
<div class="row">
<div class="side-blank-block hidden-xs hidden-sm col-md-12 col-lg-12"></div>
<!-- side toc index start -->
<div class="widget sideTocWrapper hidden-xs hidden-sm col-md-12 col-lg-12" data-version="1">
<h2><em id="tocBoxBtn2" class="toggleTocPanClose">INDEX</em>&nbsp;&nbsp;&nbsp;<em id="tocLevBtn2" class="toggleTocTreeClose">FOLD</em></h2>
<div class="widget-content sideToc">
<div id="sideTocIdxTree" class="sideTocIdx"></div>
</div>
</div>
<!-- side toc index end -->
</div>
</aside><!-- /.blog-sidebar -->

</div><!-- /.row -->
</main><!-- /.container -->

<!-- photo frame -->
<div id="photo-frame" class="modal fade photo-frame" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>
<!-- photo frame -->

</body>
<!--
<script type="text/javascript" src="../scripts/ts/basic.js"         ></script>
<script type="text/javascript" src="../scripts/ts/dataStructure.js" ></script>
<script type="text/javascript" src="../scripts/ts/web.js"           ></script>
<script type="text/javascript" src="../scripts/ts/webHtmlPage.js"   ></script>
<script type="text/javascript" src="../scripts/ts/3rdLibTool.js"    ></script>
<script type="text/javascript" src="../scripts/ts/wiki.js" ></script>
-->
<script type="module">
	import {BlogPage} from "../scripts/ts/blog.js"
BlogPage.initWikiPage('', 'Vim-Wiki中使用Unicode字符');
</script> 
</html>